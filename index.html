<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡¶Æ‡¶æ‡¶®‡¶ø ‡¶´‡¶ø‡¶∂‡¶ø‡¶Ç - ‡¶™‡ßç‡¶∞‡ßã ‡¶∂‡¶™</title>
    <style>
        body { margin: 0; padding: 0; background: #001a00; overflow: hidden; touch-action: none; font-family: sans-serif; }
        canvas { display: block; }
        #ui { 
            position: absolute; width: 100%; top: 10px; 
            color: #00ff00; font-size: 20px; text-align: center; 
            text-shadow: 2px 2px #000; pointer-events: none; z-index: 10;
        }
        #btn-container {
            position: absolute; bottom: 20px; width: 100%;
            display: flex; justify-content: center; z-index: 20;
        }
        .btn {
            border: 2px solid #fff; padding: 12px 25px;
            color: white; font-size: 16px; border-radius: 30px; font-weight: bold; cursor: pointer;
        }
        #shopBtn { background: #d32f2f; box-shadow: 0 4px #7b1f1f; }
        
        /* ‡¶∂‡¶™ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        #shopMenu {
            display: none; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); background: rgba(0,20,0,0.95);
            width: 85%; border: 3px solid #ffd700; border-radius: 20px;
            padding: 20px; text-align: center; color: white; z-index: 100;
        }
        .shop-item {
            background: #111; margin: 10px 0; padding: 15px;
            border-radius: 12px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #333;
        }
        .buy-btn { background: #2e7d32; border: none; color: white; padding: 8px 15px; border-radius: 5px; }
        #closeShop { background: #555; margin-top: 15px; width: 100%; }
    </style>
</head>
<body>
    <div id="ui">
        üí∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: $<span id="coins">0.00</span><br>
        ‚öì ‡¶≤‡ßá‡¶≠‡ßá‡¶≤: <span id="lvl">1</span> | üìè ‡¶ó‡¶≠‡ßÄ‡¶∞‡¶§‡¶æ: <span id="maxD">500</span>m
    </div>
    
    <div id="btn-container">
        <button class="btn" id="shopBtn" onclick="toggleShop(true)">üõçÔ∏è ‡¶∂‡¶™ / ‡¶¶‡ßã‡¶ï‡¶æ‡¶®</button>
    </div>

    <div id="shopMenu">
        <h2 style="color: #ffd700; margin-top: 0;">üõí ‡¶¨‡¶Å‡ßú‡¶∂‡¶ø ‡¶¶‡ßã‡¶ï‡¶æ‡¶®</h2>
        
        <div class="shop-item">
            <div>
                <b style="display:block">‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶°</b>
                <small>‡¶ó‡¶≠‡ßÄ‡¶∞‡¶§‡¶æ +‡ß´‡ß¶‡ß¶ ‡¶Æ‡¶ø.</small>
            </div>
            <button class="buy-btn" id="upBtnShop" onclick="doUpgrade()">$ <span id="upCost">5.00</span></button>
        </div>

        <div class="shop-item">
            <div>
                <b style="display:block">‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶∏‡ßç‡¶™‡¶ø‡¶°</b>
                <small>‡¶¨‡¶Å‡ßú‡¶∂‡¶ø‡¶∞ ‡¶ó‡¶§‡¶ø ‡¶¨‡¶æ‡ßú‡¶¨‡ßá</small>
            </div>
            <button class="buy-btn" onclick="buySpeed(20, 25)">$20.00</button>
        </div>

        <button class="btn" id="closeShop" onclick="toggleShop(false)">‡¶ñ‡ßá‡¶≤‡¶æ‡ßü ‡¶´‡ßá‡¶∞‡ßã</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const coinsEl = document.getElementById("coins");
        const lvlEl = document.getElementById("lvl");
        const maxDEl = document.getElementById("maxD");
        const upCostEl = document.getElementById("upCost");
        const shopMenu = document.getElementById("shopMenu");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let totalBalance = 0.00;
        let currentLevel = 1;
        let costToUpgrade = 5.00;
        let hook = { x: canvas.width / 2, y: 70, speed: 12, state: 'idle', maxDepth: 500 };
        let moneyItems = [];

        function toggleShop(show) {
            shopMenu.style.display = show ? "block" : "none";
        }

        // ‡¶∂‡¶™‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶° ‡¶≤‡¶ú‡¶ø‡¶ï
        function doUpgrade() {
            if (totalBalance >= costToUpgrade) {
                totalBalance -= costToUpgrade;
                currentLevel++;
                hook.maxDepth += 500;
                costToUpgrade = parseFloat((costToUpgrade * 2.2).toFixed(2));
                updateUI();
                alert("‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ü‡¶™! ‡¶è‡¶ñ‡¶® ‡¶Ü‡¶™‡¶®‡¶ø " + hook.maxDepth + " ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶Ø‡ßá‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§");
            } else {
                alert("‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á, ‡¶¶‡¶æ‡¶¶‡ßÅ!");
            }
        }

        function buySpeed(price, newSpeed) {
            if (totalBalance >= price) {
                totalBalance -= price;
                hook.speed = newSpeed;
                updateUI();
                alert("‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶¨‡ßá‡ßú‡ßá‡¶õ‡ßá! ‡¶è‡¶ñ‡¶® ‡¶¨‡¶Å‡ßú‡¶∂‡¶ø ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶ö‡¶≤‡¶¨‡ßá‡•§");
            } else {
                alert("‡¶ü‡¶æ‡¶ï‡¶æ ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá, ‡¶¶‡¶æ‡¶¶‡ßÅ!");
            }
        }

        function updateUI() {
            coinsEl.innerText = totalBalance.toFixed(2);
            lvlEl.innerText = currentLevel;
            maxDEl.innerText = hook.maxDepth;
            upCostEl.innerText = costToUpgrade.toFixed(2);
        }

        function createMoney() {
            if (moneyItems.length < 12) {
                moneyItems.push({
                    x: Math.random() * (canvas.width - 40) + 20,
                    y: Math.random() * (hook.maxDepth - 150) + 150,
                    val: 0.01,
                    speed: Math.random() * 1.5 + 1,
                    dir: Math.random() < 0.5 ? 1 : -1,
                    caught: false
                });
            }
        }

        function draw() {
            let cameraY = (hook.y > canvas.height / 2) ? hook.y - canvas.height / 2 : 0;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(0, -cameraY);

            // ‡¶∏‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞
            ctx.fillStyle = "#001a00";
            ctx.fillRect(0, 0, canvas.width, hook.maxDepth + 1000);

            // ‡¶π‡ßÅ‡¶ï
            ctx.strokeStyle = "#fff"; ctx.lineWidth = 2;
            ctx.beginPath(); ctx.moveTo(canvas.width/2, 0); ctx.lineTo(hook.x, hook.y); ctx.stroke();
            ctx.font = "40px Arial"; ctx.fillText("ü™ù", hook.x - 20, hook.y + 25);

            moneyItems.forEach((m, i) => {
                if (m.caught) { m.x = hook.x; m.y = hook.y + 15; }
                else {
                    m.x += m.speed * m.dir;
                    if (m.x > canvas.width - 20 || m.x < 20) m.dir *= -1;
                }
                ctx.fillStyle = "#FFD700"; ctx.beginPath();
                ctx.arc(m.x, m.y, 15, 0, Math.PI * 2); ctx.fill();
                ctx.fillStyle = "#000"; ctx.font = "bold 12px Arial";
                ctx.fillText("$", m.x - 4, m.y + 5);

                if (hook.state === 'retracting' && !m.caught) {
                    if (Math.hypot(hook.x - m.x, hook.y - m.y) < 35) m.caught = true;
                }
            });

            ctx.restore();

            if (hook.state === 'dropping') {
                hook.y += hook.speed;
                if (hook.y > hook.maxDepth) hook.state = 'retracting';
            } else if (hook.state === 'retracting') {
                hook.y -= hook.speed;
                if (hook.y <= 75) {
                    moneyItems.forEach(it => { if(it.caught) totalBalance += it.val; });
                    moneyItems = moneyItems.filter(it => !it.caught);
                    updateUI();
                    hook.state = 'idle';
                }
            }
            requestAnimationFrame(draw);
        }

        window.addEventListener("mousedown", () => { 
            if(hook.state === 'idle' && shopMenu.style.display !== "block") hook.state = 'dropping'; 
        });
        window.addEventListener("touchstart", (e) => { 
            if(hook.state === 'idle' && shopMenu.style.display !== "block") hook.state = 'dropping'; 
        });

        setInterval(createMoney, 1000);
        draw();
    </script>
</body>
</html>

