<script>
    const canvas = document.getElementById('wheel');
    const ctx = canvas.getContext('2d');
    
    // ‡¶¶‡¶æ‡¶¶‡ßÅ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡ßß‡ßÆ‡¶ü‡¶ø ‡¶ò‡¶∞‡ßá‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ
    // ‡ß¶.‡ß®, ‡ß¶.‡ß´ ‡¶π‡¶≤‡ßã ‡ßß ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶ò‡¶∞‡¶ó‡ßÅ‡¶≤‡ßã
    const items = [
        "0", "0.2", "1", "3", "0.5", "2", "15", "0.2", "1", 
        "5", "0", "10", "0.5", "2", "0.8", "7", "0", "1"
    ];

    const colors = ["#f59e0b", "#000000", "#f59e0b", "#000000", "#f59e0b", "#000000", "#f59e0b", "#000000", "#f59e0b", "#000000", "#f59e0b", "#000000", "#f59e0b", "#000000", "#f59e0b", "#000000", "#f59e0b", "#000000"];
    
    const slices = items.length;
    const sliceDeg = 360 / slices; // ‡ß®‡ß¶ ‡¶°‡¶ø‡¶ó‡ßç‡¶∞‡¶ø
    
    canvas.width = 330;
    canvas.height = 330;

    function draw() {
        for (let i = 0; i < slices; i++) {
            ctx.beginPath();
            ctx.fillStyle = colors[i];
            ctx.moveTo(165, 165);
            let startAngle = (i * sliceDeg - 90 - (sliceDeg / 2)) * (Math.PI / 180);
            let endAngle = ((i + 1) * sliceDeg - 90 - (sliceDeg / 2)) * (Math.PI / 180);
            ctx.arc(165, 165, 165, startAngle, endAngle);
            ctx.fill();
            ctx.stroke();

            ctx.save();
            ctx.translate(165, 165);
            ctx.rotate((i * sliceDeg - 90) * (Math.PI / 180));
            ctx.textAlign = "right";
            ctx.fillStyle = (colors[i] === "#000000") ? "#f59e0b" : "#000000";
            ctx.font = "bold 13px Orbitron";
            // ‡ß¶ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá "Empty" ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡¶π‡¶≤‡ßá ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ
            let displayText = items[i] === "0" ? "Empty" : items[i];
            ctx.fillText(displayText, 150, 5);
            ctx.restore();
        }
    }

    let currentRotation = 0;
    let totalDiamonds = 0;

    function startProcess() {
        document.getElementById('main-btn').disabled = true;
        document.getElementById('ad-modal').style.display = 'flex';
        setTimeout(() => {
            document.getElementById('ad-modal').style.display = 'none';
            spin();
        }, 2500);
    }

    function spin() {
        // ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶®‡¶ø‡¶ñ‡ßÅ‡¶Å‡¶§ ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
        const winningIndex = Math.floor(Math.random() * slices);
        const targetDeg = (slices - winningIndex) * sliceDeg;
        currentRotation += (3600 - (currentRotation % 360)) + targetDeg;
        
        canvas.style.transform = `rotate(${currentRotation}deg)`;

        setTimeout(() => {
            document.getElementById('main-btn').disabled = false;
            const win = parseFloat(items[winningIndex]);
            
            if(win > 0) {
                totalDiamonds = (parseFloat(totalDiamonds) + win).toFixed(2);
                document.getElementById('balance').innerText = totalDiamonds;
                alert("‡¶∏‡¶æ‡¶¨‡¶æ‡¶∏ ‡¶¶‡¶æ‡¶¶‡ßÅ! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶® " + win + " üíé");
            } else {
                alert("‡¶á‡¶∏‡¶∏! ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶ò‡¶∞‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            }
        }, 6500);
    }

    draw();
</script>

